// Place your application-specific JavaScript functions and classes here
// This file is automatically included by javascript_include_tag :defaults
//'#E8E8E2'
function removeFilter(a){a.style.removeAttribute&&a.style.removeAttribute("filter")}$(document).ready(function(){function a(){$(".pulsate").animate({opacity:.2},1e3,"linear").animate({opacity:1},1e3,"linear",a)}function b(a){return $("#"+a).find("dt a span.value").html()}function c(a){$().toastmessage("showNoticeToast",a)}function d(a,b,c){if(c){var d=new Date;d.setTime(d.getTime()+c*24*60*60*1e3);var e="; expires="+d.toGMTString()}else var e="";document.cookie=a+"="+b+e+"; path=/"}function e(a){var b=a+"=",c=document.cookie.split(";");for(var d=0;d<c.length;d++){var e=c[d];while(e.charAt(0)==" ")e=e.substring(1,e.length);if(e.indexOf(b)==0)return e.substring(b.length,e.length)}return null}function f(a){d(a,"",-1)}function g(a){return a.slice(0,17)+".."}$(".footer").hide(),$("#pagename").text()=="home"?($("#homefooter").show(),$("#viewfooter").hide()):($("#viewfooter").hide(),$("#homefooter").hide()),$("#foo3").awShowcase({content_width:810,content_height:230}),$(".tag_dummy:first").removeClass("tag_dummy").addClass("tags"),$("body").noisy({intensity:1,size:200,opacity:.08,fallback:"",monochrome:!1}).css("background-color","#FBFBF7"),$(".prod_img").aeImageResize({width:77}),search_wat=$(document).getUrlParam("last_search_type"),search_wat!=null&&($("#search_type").val(search_wat),search_wat=="books"?($("#searchbooks").addClass("active"),$("#searchmovies").removeClass("active"),$("#searchmobiles").removeClass("active"),$("#searchcamera").removeClass("active"),$("#searchcomputers").removeClass("active")):search_wat=="movies"?($("#searchmovies").addClass("active"),$("#searchbooks").removeClass("active"),$("#searchmobiles").removeClass("active"),$("#searchcamera").removeClass("active"),$("#searchcomputers").removeClass("active")):search_wat=="mobiles"?($("#searchmobiles").addClass("active"),$("#searchbooks").removeClass("active"),$("#searchmovies").removeClass("active"),$("#searchcamera").removeClass("active"),$("#searchcomputers").removeClass("active")):search_wat=="cameras"?($("#searchcamera").addClass("active"),$("#searchbooks").removeClass("active"),$("#searchmobiles").removeClass("active"),$("#searchmovies").removeClass("active"),$("#searchcomputers").removeClass("active")):search_wat=="computers"&&($("#searchcomputers").addClass("active"),$("#searchbooks").removeClass("active"),$("#searchmobiles").removeClass("active"),$("#searchmovies").removeClass("active"),$("#searchcamera").removeClass("active"))),$("#search_button").click(function(){mpq.track("Search")}),$(".purchase a").click(function(){mpq.track("Shopped")}),$("#searchbooks").click(function(){$("#search_type,#last_search_type").val("books"),d("search_what","books",1),$(this).addClass("active"),$("#searchmovies").removeClass("active"),$("#searchmobiles").removeClass("active"),$("#searchcamera").removeClass("active"),$("#searchcomputers").removeClass("active")}),$("#searchmovies").click(function(){$("#search_type,#last_search_type").val("movies"),d("search_what","movies",1),$(this).addClass("active"),$("#searchbooks").removeClass("active"),$("#searchmobiles").removeClass("active"),$("#searchcamera").removeClass("active"),$("#searchcomputers").removeClass("active")}),$("#searchmobiles").click(function(){$("#search_type,#last_search_type").val("mobiles"),d("search_what","mobiles",1),$(this).addClass("active"),$("#searchmovies").removeClass("active"),$("#searchbooks").removeClass("active"),$("#searchcamera").removeClass("active"),$("#searchcomputers").removeClass("active")}),$("#searchcamera").click(function(){$("#search_type,#last_search_type").val("cameras"),d("search_what","cameras",1),$(this).addClass("active"),$("#searchmovies").removeClass("active"),$("#searchbooks").removeClass("active"),$("#searchmobiles").removeClass("active"),$("#searchcomputers").removeClass("active")}),$("#searchcomputers").click(function(){$("#search_type,#last_search_type").val("computers"),d("search_what","computers",1),$(this).addClass("active"),$("#searchmovies").removeClass("active"),$("#searchbooks").removeClass("active"),$("#searchmobiles").removeClass("active"),$("#searchcamera").removeClass("active")}),$("#search_link").click(function(){$("#searchsubmit_btn").click()}),$(".btn").append($("<span />").addClass("helper")),$(".dropdown dt a").click(function(){$(".dropdown dd ul").toggle()}),$(".dropdown dd ul li a").click(function(){var a=$(this).html();$(".dropdown dt a span").html(a),$(".dropdown dd ul").hide(),$("#result").html("Selected value is: "+b("sample"))}),$(document).bind("click",function(a){var b=$(a.target);b.parents().hasClass("dropdown")||$(".dropdown dd ul").hide()})}),function(a){a.fn.awShowcase=function(b){function D(c){var d=a(document.createElement("div")).attr("id","showcase-content-"+c).css("overflow","hidden").css("position","absolute").addClass("showcase-content").html(r[c]);return b.viewline||d.css("width",b.content_width),b.fit_to_parent&&!b.viewline&&d.css("left",k/2-b.content_width/2),d}function E(){var a=parseInt(d)+1;a===t&&b.continuous?a=0:a===t&&!b.continuous&&(f=!0,clearInterval(h)),f||F(a,"next")}function F(c,f){if(d!==c&&!l){var i,r,s=0,u,v=b.fit_to_parent?k/2-b.content_width/2:0;if(c>d&&f!=="previous"||f==="next")if(b.viewline){if(d<t-1){b.speed_change||(l=!0),S(),b.pauseonover&&window.clearInterval(h),p=0;for(u=d+1,len=t;u<len;++u)i=R[u],p+=i.find(".showcase-content").children().width();p>k?(o=n,n-=R[d].find(".showcase-content").children().width()):$(".showcase-arrow-next").is(":visible")&&(o=n,n=-(m-(p+(k-p))),$(".showcase-arrow-next").fadeOut(300)),q.animate({left:n+"px"},b.transition_speed,function(){l=!1}),$(".showcase-arrow-next").is(":visible")&&d++,$(".showcase-arrow-previous").fadeIn(300)}}else b.speed_change||(l=!0),i=a(j).find("#showcase-content-"+parseInt(d)),r=D(c),q.append(r),b.dynamic_height?r.css("height",r.find(".showcase-content").children().height()):r.css("height",b.content_height),i.find(".showcase-content").children().height()>r.find(".showcase-content").children().height()&&b.dynamic_height&&(q.stop(!0,!0).animate({height:r.find(".showcase-content").children().height()},200),s=100),b.transition==="hslide"?a(i).delay(s).animate({left:-b.content_width},b.transition_speed+b.transition_delay,function(){i.remove()}):b.transition==="vslide"?a(i).delay(s).animate({top:-b.content_height},b.transition_speed+b.transition_delay,function(){i.remove()}):a(i).delay(s).fadeOut(b.transition_speed,function(){i.remove()}),K(i,!0),J(i,!0),b.transition==="hslide"?(r.css("left",k),a(r).delay(s).animate({left:v},b.transition_speed,function(){K(r),J(r),G(r)})):b.transition==="vslide"?(r.css("top",j.height()),a(r).delay(s).animate({top:"0px"},b.transition_speed,function(){K(r),J(r),G(r)})):(r.css("left",v),r.css("display","none"),a(r).delay(s).fadeIn(b.transition_speed,function(){K(r),J(r),G(r)}));else if(c<d||f==="previous")b.viewline?(d!==0&&(b.speed_change||(l=!0),S(),b.pauseonover&&window.clearInterval(h),q.animate({left:o+"px"},b.transition_speed,function(){l=!1}),n=o,d--,d===0&&$(".showcase-arrow-previous").fadeOut(300),old_id=d-1,sub_width=a(R[old_id]).width(),o+=sub_width),$(".showcase-arrow-next").fadeIn(300)):(b.speed_change||(l=!0),i=a(j).find("#showcase-content-"+parseInt(d)),r=D(c),q.append(r),b.dynamic_height?r.css("height",r.find(".showcase-content").children().height()):r.css("height",b.content_height),i.find(".showcase-content").children().height()>r.find(".showcase-content").children().height()&&b.dynamic_height&&(q.stop(!0,!0).animate({height:r.find(".showcase-content").children().height()},200),s=100),b.transition==="hslide"?a(i).delay(s).animate({left:k+"px"},b.transition_speed+b.transition_delay,function(){K(i,!0),J(i,!0),i.remove()}):b.transition==="vslide"?a(i).delay(s).animate({top:b.content_height+"px"},b.transition_speed+b.transition_delay,function(){K(i,!0),J(i,!0),i.remove()}):a(i).delay(s).fadeOut(b.transition_speed,function(){K(i,!0),J(i,!0),i.remove()}),b.transition==="hslide"?(r.css("left","-"+b.content_width+"px"),a(r).delay(s).animate({left:v},b.transition_speed,function(){K(r),J(r),G(r)})):b.transition==="vslide"?(r.css("top","-"+j.height()+"px"),a(r).delay(s).animate({top:"0px"},b.transition_speed,function(){K(r),J(r),G(r)})):(r.css("left",v),r.css("display","none"),a(r).delay(s).fadeIn(b.transition_speed,function(){K(r),J(r),G(r)})),q.append(r));b.viewline||(e=d,d=c,b.thumbnails&&(d>e&&f!=="previous"||f==="next"?I("forward",!0):(d<e||f==="previous")&&I("backward",!0)),b.arrows&&(a(j).find(".showcase-arrow-previous").unbind("click").click(function(){h&&(b.stoponclick&&(g=!0),clearInterval(h)),F(d===0?t-1:parseInt(d)-1,"previous")}),a(j).find(".showcase-arrow-next").unbind("click").click(function(){h&&(b.stoponclick&&(g=!0),clearInterval(h)),F(d===t-1?0:parseInt(d)+1,"next")})),b.thumbnails&&(u=0,j.find(".showcase-thumbnail").each(function(){var b=a(this);b.removeClass("active"),u===d&&b.addClass("active"),u++})),b.show_caption==="show"&&a(r).find(".showcase-caption").show()),b.buttons&&(u=0,j.find(".showcase-button-wrapper span").each(function(){var b=a(this);b.removeClass("active"),u===d&&b.addClass("active"),u++})),typeof b.custom_function=="function"&&b.custom_function()}}function G(a){b.dynamic_height&&q.stop(!0,!0).animate({height:a.find(".showcase-content").children().height()},200),l=!1}function I(c,e,f){var g=!0,h=N(a(u).find(".showcase-thumbnail"));b.thumbnails_direction==="horizontal"&&(h=O(a(u).find(".showcase-thumbnail")));var i=1;b.thumbnails_slidex===0&&(b.thumbnails_slidex=w);if(e){var j=H,k=0;while(j<0)b.thumbnails_direction==="horizontal"?j+=O(a(s[0])):j+=N(a(s[0])),k++;var l=k,m=w+k-1;d>=l&&d<=m&&(g=!1);var n;if(d-m>b.thumbnails_slidex){n=d-m;while(n>b.thumbnails_slidex)n-=b.thumbnails_slidex,i++}else if(l-d>b.thumbnails_slidex){n=l-d;while(n>b.thumbnails_slidex)n-=b.thumbnails_slidex,i++}else i=1}c==="forward"&&g?(b.thumbnails_direction==="vertical"&&b.content_height<v+H?H-=h*b.thumbnails_slidex*i:b.thumbnails_direction==="horizontal"&&b.content_width<v+H?H-=h*b.thumbnails_slidex*i:d===0&&(f||(H=0)),b.thumbnails_direction==="horizontal"?u.animate({left:H},300):u.animate({top:H},300)):g&&(H<0?H+=h*b.thumbnails_slidex*i:d===t-1?f||(H-=h*b.thumbnails_slidex*i):H=0,b.thumbnails_direction==="horizontal"?u.animate({left:H},300):u.animate({top:H},300))}function J(c,d){var e=c.find(".showcase-caption");d?e.stop(!0,!0).fadeOut(300):b.show_caption==="onload"?e.fadeIn(300):b.show_caption==="onhover"&&(a(c).mouseenter(function(){e.fadeIn(300)}),a(c).mouseleave(function(){e.stop(!0,!0).fadeOut(100)}))}function K(c,d){c.find(".showcase-tooltips a").each(function(){if(!d){var e=a(this).attr("coords");e=e.split(","),a(this).addClass("showcase-plus-anchor"),a(this).css("position","absolute"),a(this).css("display","none"),a(this).css("width",b.tooltip_icon_width),a(this).css("height",b.tooltip_icon_height),a(this).css("left",parseInt(e[0])-parseInt(b.tooltip_icon_width)/2),a(this).css("top",parseInt(e[1])-parseInt(b.tooltip_icon_height)/2);var f=a(this).html();a(this).mouseenter(function(){M(c,e[0],e[1],f)}),a(this).mouseleave(function(){M(c,e[0],e[1],f)}),a(this).html(""),a(this).fadeIn(300)}else a(this).stop(!0,!0).fadeOut(300)})}function M(c,d,e,f){if(L===null){L=a(document.createElement("div")).addClass("showcase-tooltip").css("display","none").css("position","absolute").css("max-width",b.tooltip_width).html(f),c.append(L);var g=parseInt(L.css("padding-right"))*2+parseInt(L.css("border-right-width"))*2,h=parseInt(L.css("padding-bottom"))*2+parseInt(L.css("border-bottom-width"))*2;lastx=parseInt(d)+L.width()+g,lasty=parseInt(e)+L.height()+h,lastx<b.content_width?L.css("left",parseInt(d)+parseInt(b.tooltip_offsetx)):L.css("left",parseInt(d)-parseInt(b.tooltip_offsetx)-(parseInt(L.width())+parseInt(b.tooltip_offsetx))),lasty<b.content_height?L.css("top",parseInt(e)+parseInt(b.tooltip_offsety)):L.css("top",parseInt(e)-parseInt(b.tooltip_offsety)-(parseInt(L.height())+parseInt(h))),L.fadeIn(400)}else L.fadeOut(400),L.remove(),L=null}function N(b,c,d,e,f){c=typeof c!="undefined"?c:!0,d=typeof d!="undefined"?d:!0,e=typeof e!="undefined"?e:!0,f=typeof f!="undefined"?f:!0;var g=c?a(b).height():0,h=d?parseFloat(a(b).css("margin-top"))+parseFloat(a(b).css("margin-bottom")):0,i=e?parseFloat(a(b).css("padding-top"))+parseFloat(a(b).css("padding-bottom")):0,j=f?parseFloat(a(b).css("border-top-width"))+parseFloat(a(b).css("border-bottom-width")):0;return g+=h+i+j,g}function O(b,c,d,e,f){c=typeof c!="undefined"?c:!0,d=typeof d!="undefined"?d:!0,e=typeof e!="undefined"?e:!0,f=typeof f!="undefined"?f:!0;var g=c?a(b).width():0,h=d?parseFloat(a(b).css("margin-left"))+parseFloat(a(b).css("margin-right")):0,i=e?parseFloat(a(b).css("padding-left"))+parseFloat(a(b).css("padding-right")):0,j=f?parseFloat(a(b).css("border-left-width"))+parseFloat(a(b).css("border-right-width")):0;return g+=h+i+j,g}function S(){m=0,q.children("div").each(function(){m+=$(this).find(".showcase-content").children().width(),R.push($(this))})}var c={content_width:700,content_height:470,fit_to_parent:!1,auto:!1,interval:3e3,continuous:!1,loading:!0,tooltip_width:200,tooltip_icon_width:32,tooltip_icon_height:32,tooltip_offsetx:18,tooltip_offsety:0,arrows:!0,buttons:!0,btn_numbers:!1,keybord_keys:!1,mousetrace:!1,pauseonover:!0,stoponclick:!0,transition:"hslide",transition_delay:300,transition_speed:500,show_caption:"onload",thumbnails:!1,thumbnails_position:"outside-last",thumbnails_direction:"vertical",thumbnails_slidex:0,dynamic_height:!1,speed_change:!1,viewline:!1,fullscreen_width_x:15,custom_function:null};b=a.extend(c,b);var d=0,e=0,f=!1,g=!1,h=null,j=a(this),k=b.content_width,l=!1,m=1e4,n=0,o=0,p=0,q=a(document.createElement("div")).css("overflow","hidden").css("position","relative").addClass("showcase-content-container").prependTo(j);b.fit_to_parent&&(k=a(j).width()+b.fullscreen_width_x),b.viewline&&(b.thumbnails=!1,b.dynamic_height=!1,q.css("width",m),j.css("overflow","hidden"),$(".showcase-arrow-previous").hide());var r=[],s=[],t=0;j.children(".showcase-slide").each(function(){var c=a(this);t++;if(b.thumbnails){var d=c.find(".showcase-thumbnail");s.push(d),d.remove()}var e=c.find(".showcase-content").children().width(),f=c.find(".showcase-content").children().height();r.push(c.html()),c.remove();var g=D(t-1);(b.viewline||t===1)&&q.append(g),b.viewline&&(g.css("position","relative"),g.css("float","left"),g.css("width",e)),b.dynamic_height?(g.css("height",f),t===1&&q.css("height",f)):(g.css("height",b.content_height),t===1&&q.css("height",b.content_height));if(b.viewline||t===1)K(g),J(g),b.show_caption==="show"&&a(g).find(".showcase-caption").show()});var u,v=0,w=0;if(b.thumbnails){thumb_container=a("<div />"),thumb_restriction=a("<div />"),u=a("<div />");for(i=s.length-1;i>=0;--i){var x=a(s[i]).css({overflow:"hidden"});x.attr("id","showcase-thumbnail-"+i),x.addClass(i===0?"active":""),x.click(function(a,b){return function(){h&&(g=!0,clearInterval(h)),F(a,b)}}(i,"")),u.prepend(x)}b.thumbnails_position==="outside-first"||b.thumbnails_position==="outside-last"?(b.thumbnails_direction!=="horizontal"?(q.css("float","left"),q.css("width",b.content_width),thumb_container.css("float","left"),thumb_container.css("height",b.content_height)):a(u).find(".showcase-thumbnail").css("float","left"),b.thumbnails_position==="outside-last"?(j.append(thumb_container),b.thumbnails_direction!=="horizontal"&&j.append(a("<div />").addClass("clear"))):(j.prepend(thumb_container),b.thumbnails_direction!=="horizontal"&&j.append(a("<div />").addClass("clear")))):(thumb_container.css({position:"absolute","z-index":20}),b.thumbnails_direction==="horizontal"?(thumb_container.css({left:0,right:0}),a(u).find(".showcase-thumbnail").css("float","left"),a(u).append(a("<div />").addClass("clear")),b.thumbnails_position==="inside-first"?thumb_container.css("top",0):thumb_container.css("bottom",0)):(thumb_container.css({top:0,bottom:0}),b.thumbnails_position==="inside-first"?thumb_container.css("left",0):thumb_container.css("right",0)),q.prepend(thumb_container)),thumb_container.addClass("showcase-thumbnail-container"),thumb_container.css("overflow","hidden"),thumb_restriction.addClass("showcase-thumbnail-restriction"),thumb_restriction.css({overflow:"hidden",position:"relative"}),b.thumbnails_direction==="horizontal"&&thumb_restriction.css({"float":"left"}),u.addClass("showcase-thumbnail-wrapper"),b.thumbnails_direction==="horizontal"?u.addClass("showcase-thumbnail-wrapper-horizontal"):u.addClass("showcase-thumbnail-wrapper-vertical"),u.css("position","relative"),thumb_restriction.append(u),thumb_container.append(thumb_restriction);var y=a('<div class="showcase-thumbnail-button-backward" />');b.thumbnails_direction!=="horizontal"?y.html('<span class="showcase-thumbnail-vertical"><span>Up</span></span>'):(y.css({"float":"left"}),y.html('<span class="showcase-thumbnail-horizontal"><span>Left</span></span>')),y.click(function(){I("backward",!1,!0)}),thumb_container.prepend(y);var z=a('<div class="showcase-thumbnail-button-forward" />');b.thumbnails_direction!=="horizontal"?z.html('<span class="showcase-thumbnail-vertical"><span>Down</span></span>'):(z.css({"float":"left"}),z.html('<span class="showcase-thumbnail-horizontal"><span>Right</span></span>')),z.click(function(){I("forward",!1,!0)}),thumb_container.append(z);var A=0;if(b.thumbnails_direction!=="horizontal"){A=N(u,!1),A+=N(y)+N(z);while(A<b.content_height)A+=N(a(s[0])),w++}else{A=O(u,!1),A+=O(y)+O(z);while(A<k)A+=O(a(s[0])),w++}w+1>s.length&&(b.thumbnails_direction!=="horizontal"?thumb_restriction.css("margin-top",N(y)):thumb_restriction.css("margin-left",O(y)),y.hide(),z.hide());if(b.thumbnails_direction!=="horizontal"){var B=N(y)+N(z);thumb_restriction.css("height",b.content_height-B)}else{var C=O(y)+O(z);thumb_restriction.css("width",k-C)}b.thumbnails_direction==="horizontal"?(a(".showcase-thumbnail").each(function(){v+=O(a(this))}),u.css("width",v)):a(".showcase-thumbnail").each(function(){v+=N(a(this))})}b.thumbnails&&b.thumbnails_position.indexOf("outside")!==-1&&b.thumbnails_direction!=="horizontal"&&!b.viewline?j.css("width",k+O(u,!0,!1)):b.fit_to_parent||j.css("width",k),t>1&&b.auto&&(h=window.setInterval(E,b.interval)),b.auto&&b.pauseonover&&(j.mouseenter(function(){f=!0,clearInterval(h)}),j.mouseleave(function(){g||(f=!1,h=window.setInterval(E,b.interval))})),b.arrows&&t>1&&(a(document.createElement("div")).addClass("showcase-arrow-previous").prependTo(j).click(function(){h&&(b.stoponclick&&(g=!0),clearInterval(h)),F(d===0?t-1:parseInt(d)-1,"previous")}),a(document.createElement("div")).addClass("showcase-arrow-next").prependTo(j).click(function(){h&&(b.stoponclick&&(g=!0),clearInterval(h)),F(d+1,"next")}),b.viewline&&$(".showcase-arrow-previous").hide());if(b.buttons&&t>1){a(document.createElement("div")).css("clear","both").addClass("showcase-button-wrapper").appendTo(j),i=0;while(i<t)a(document.createElement("span")).attr("id","showcase-navigation-button-"+i).addClass(i===0?"active":"").html(b.btn_numbers?parseInt(i)+1:"&#9679;").click(function(a,c){return function(){h&&(b.stoponclick&&(g=!0),clearInterval(h)),F(a,c)}}(i,"")).appendTo(a(j).find(".showcase-button-wrapper")),i++}b.keybord_keys&&a(document).keydown(function(a){b.stoponclick&&(g=!0),h&&clearInterval(h),a.keyCode===37&&F(d===0?t-1:parseInt(d)-1,"previous"),a.keyCode===39&&F(d===t-1?0:parseInt(d)+1,"next")});var H=0,L=null;if(b.mousetrace){var P=a(document.createElement("div")).css("position","absolute").css("top","0").css("background-color","#fff").css("color","#000").css("padding","3px 5px").css("x-index","30").html("X: 0 Y: 0");j.append(P);var Q=j.offset();q.mousemove(function(a){P.html("X: "+(a.pageX-Q.left)+" Y: "+(a.pageY-Q.top))})}$("#awOnePageButton").click(function(){if($(".view-page").is(":visible")){var d=a(document.createElement("div"));d.addClass("showcase-onepage"),j.before(d),h&&(g=!0,clearInterval(h)),$(this).find(".view-page").hide(),$(this).find(".view-slide").show(),j.hide(),$.each(r,function(a,c){obj=D(a),obj.css("position","relative"),d.append(obj),K(obj),J(obj),b.dynamic_height?obj.css("height",obj.find(".showcase-content").children().height()):obj.css("height",b.content_height)});var e=a(document.createElement("div"));e.addClass("clear"),d.append(e)}else $(".showcase-onepage").remove(),$(this).find(".view-page").show(),$(this).find(".view-slide").hide(),j.show();return!1});var R=[];j.removeClass("showcase-load")}}(jQuery),function(a){var b;a.fn.feedback=function(d){b=a.extend({main:"feedback",closeLink:"feedback_close_link",modalWindow:"feedback_modal_window",modalContent:"feedback_modal_content",form:"feedback_form",formUrl:"/feedbacks/new",overlay:"feedback_overlay",loadingImage:"/assets/feedback/loading.gif",loadingText:"Loading...",sendingText:"Sending...",tabPosition:"left"},d||{}),b.feedbackHtml='<div id="'+b.main+'" style="display: none;">'+'<div id="'+b.modalWindow+'">'+'<a href="#" id="'+b.closeLink+'"></a>'+'<div id="'+b.modalContent+'"></div>'+"</div>"+"</div>",b.overlayHtml='<div id="'+b.overlay+'" class="feedback_hide"></div>',b.tabHtml='<a href="#" id="feedback_link" class="feedback_link '+b.tabPosition+'"></a>',b.main="#"+b.main,b.closeLink="#"+b.closeLink,b.modalWindow="#"+b.modalWindow,b.modalContent="#"+b.modalContent,b.form="#"+b.form,b.overlay="#"+b.overlay,b.tabControls=this,b.tabPosition!=null&&a("#feedback_link").length==0&&(a("body").append(b.tabHtml),b.tabControls=a(b.tabControls).add(a("#feedback_link"))),a(b.tabControls).click(function(){return k(),a(b.modalContent).load(b.formUrl,null,function(){a(b.form).submit(c)}),!1})};var c=function(){a("input[name=feedback\\[page\\]]").val(location.href);var d=a(b.form).serialize(),e=a.trim(a(b.form).attr("action"));return k(b.sendingText),a.ajax({type:"POST",url:e,data:d,success:function(c,d){a(b.modalContent).html(c),a(b.modalWindow).fadeOut(2e3,function(){i()})},error:function(d,e,f){a(b.modalContent).html(d.responseText),a(b.form).submit(c)}}),!1},d=function(){return a(b.overlay).length==0&&a("body").append(b.overlayHtml),a(b.overlay).hide().addClass("feedback_overlayBG")},e=function(){d().show()},f=function(){if(a(b.overlay).length==0)return!1;a(b.overlay).remove()},g=function(){return a(b.main).length==0&&(a("body").append(b.feedbackHtml),a(b.closeLink).click(function(){return i(),!1}),j()),a(b.main)},h=function(){g().show()},i=function(){a(b.main).hide(),a(b.main).remove(),f()},j=function(){var c,d;self.pageYOffset?c=self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?c=document.documentElement.scrollTop:document.body&&(c=document.body.scrollTop),self.innerHeight?d=self.innerHeight:document.documentElement&&document.documentElement.clientHeight?d=document.documentElement.clientHeight:document.body&&(d=document.body.clientHeight),a(b.modalWindow).css({top:c+d/10+"px"})},k=function(c){e(),g(),c==null&&(c=b.loadingText),a(b.modalContent).html("<h1>"+c+'<img src="'+b.loadingImage+'" /></h1>'),h()}}(jQuery),jQuery.fn.extend({getUrlParam:function(a){a=escape(unescape(a));var b=new Array,c=null;if($(this).attr("nodeName")=="#document")window.location.search.search(a)>-1&&(c=window.location.search.substr(1,window.location.search.length).split("&"));else if($(this).attr("src")!="undefined"){var d=$(this).attr("src");if(d.indexOf("?")>-1){var e=d.substr(d.indexOf("?")+1);c=e.split("&")}}else{if($(this).attr("href")=="undefined")return null;var d=$(this).attr("href");if(d.indexOf("?")>-1){var e=d.substr(d.indexOf("?")+1);c=e.split("&")}}if(c==null)return null;for(var f=0;f<c.length;f++)escape(unescape(c[f].split("=")[0]))==a&&b.push(c[f].split("=")[1]);return b.length==0?null:b.length==1?b[0]:b}}),function(a){a.fn.innerfade=function(b){return this.each(function(){a.innerfade(this,b)})},a.innerfade=function(b,c){var d={animationtype:"fade",speed:"normal",type:"sequence",timeout:2e3,containerheight:"auto",runningclass:"innerfade",children:null};c&&a.extend(d,c);if(d.children===null)var e=a(b).children();else var e=a(b).children(d.children);if(e.length>1){a(b).css("position","relative").css("height",d.containerheight).addClass(d.runningclass);for(var f=0;f<e.length;f++)a(e[f]).css("z-index",String(e.length-f)).css("position","absolute").hide();if(d.type=="sequence")setTimeout(function(){a.innerfade.next(e,d,1,0)},d.timeout),a(e[0]).show();else if(d.type=="random"){var g=Math.floor(Math.random()*e.length);setTimeout(function(){do h=Math.floor(Math.random()*e.length);while(g==h);a.innerfade.next(e,d,h,g)},d.timeout),a(e[g]).show()}else if(d.type=="random_start"){d.type="sequence";var h=Math.floor(Math.random()*e.length);setTimeout(function(){a.innerfade.next(e,d,(h+1)%e.length,h)},d.timeout),a(e[h]).show()}else alert("Innerfade-Type must either be 'sequence', 'random' or 'random_start'")}},a.innerfade.next=function(b,c,d,e){c.animationtype=="slide"?(a(b[e]).slideUp(c.speed),a(b[d]).slideDown(c.speed)):c.animationtype=="fade"?(a(b[e]).fadeOut(c.speed),a(b[d]).fadeIn(c.speed,function(){removeFilter(a(this)[0])})):alert("Innerfade-animationtype must either be 'slide' or 'fade'");if(c.type=="sequence")d+1<b.length?(d+=1,e=d-1):(d=0,e=b.length-1);else if(c.type=="random"){e=d;while(d==e)d=Math.floor(Math.random()*b.length)}else alert("Innerfade-Type must either be 'sequence', 'random' or 'random_start'");setTimeout(function(){a.innerfade.next(b,c,d,e)},c.timeout)}}(jQuery),function(a){a.fn.noisy=function(b){b=a.extend({},a.fn.noisy.defaults,b);var d,e;JSON&&localStorage.getItem&&(e=localStorage.getItem(JSON.stringify(b)));if(e)d=e;else{e=document.createElement("canvas");if(e.getContext){e.width=e.height=b.size;for(var f=e.getContext("2d"),g=f.createImageData(e.width,e.height),h=b.intensity*Math.pow(b.size,2),i=255*b.opacity;h--;){var j=(~~(Math.random()*e.width)+~~(Math.random()*e.height)*g.width)*4,k=h%255;g.data[j]=k,g.data[j+1]=b.monochrome?k:~~(Math.random()*255),g.data[j+2]=b.monochrome?k:~~(Math.random()*255),g.data[j+3]=~~(Math.random()*i)}f.putImageData(g,0,0),d=e.toDataURL("image/png");if(d.indexOf("data:image/png")!=0||a.browser.msie&&a.browser.version.substr(0,1)<9&&d.length>32768)d=b.fallback}else d=b.fallback;JSON&&localStorage&&localStorage.setItem(JSON.stringify(b),d)}return this.each(function(){a(this).css("background-image","url('"+d+"'),"+a(this).css("background-image"))})},a.fn.noisy.defaults={intensity:.9,size:200,opacity:.08,fallback:"",monochrome:!1}}(jQuery),function(a,b){function c(b){return a.less[b.split("/")[1]]}function d(){var a=document.getElementsByTagName("style");for(var b=0;b<a.length;b++)a[b].type.match(v)&&(new o.Parser).parse(a[b].innerHTML||"",function(c,d){var e=d.toCSS(),f=a[b];f.type="text/css",f.styleSheet?f.styleSheet.cssText=e:f.innerHTML=e})}function f(a,b){for(var c=0;c<o.sheets.length;c++)g(o.sheets[c],a,b,o.sheets.length-(c+1))}function g(b,c,d,e){var f=a.location.href.replace(/[#?].*$/,""),g=b.href.replace(/\?.*$/,""),k=s&&s.getItem(g),m=s&&s.getItem(g+":timestamp"),p={css:k,timestamp:m};/^(https?|file):/.test(g)||(g.charAt(0)=="/"?g=a.location.protocol+"//"+a.location.host+g:g=f.slice(0,f.lastIndexOf("/")+1)+g),j(b.href,b.type,function(a,f){if(!d&&p&&f&&(new Date(f)).valueOf()===(new Date(p.timestamp)).valueOf())i(p.css,b),c(null,b,{local:!0,remaining:e});else try{(new o.Parser({optimization:o.optimization,paths:[g.replace(/[\w\.-]+$/,"")],mime:b.type})).parse(a,function(a,d){if(a)return n(a,g);try{c(d,b,{local:!1,lastModified:f,remaining:e}),l(document.getElementById("less-error-message:"+h(g)))}catch(a){n(a,g)}})}catch(j){n(j,g)}},function(a,b){throw new Error("Couldn't load "+b+" ("+a+")")})}function h(a){return a.replace(/^[a-z]+:\/\/?[^\/]+/,"").replace(/^\//,"").replace(/\?.*$/,"").replace(/\.[^\.\/]+$/,"").replace(/[^\.\w-]+/g,"-").replace(/\./g,":")}function i(a,b,c){var d,e=b.href?b.href.replace(/\?.*$/,""):"",f="less:"+(b.title||h(e));(d=document.getElementById(f))===null&&(d=document.createElement("style"),d.type="text/css",d.media=b.media||"screen",d.id=f,document.getElementsByTagName("head")[0].appendChild(d));if(d.styleSheet)try{d.styleSheet.cssText=a}catch(g){throw new Error("Couldn't reassign styleSheet.cssText.")}else(function(a){d.childNodes.length>0?d.firstChild.nodeValue!==a.nodeValue&&d.replaceChild(a,d.firstChild):d.appendChild(a)})(document.createTextNode(a));c&&s&&(m("saving "+e+" to cache."),s.setItem(e,a),s.setItem(e+":timestamp",c))}function j(a,b,c,d){function e(b,c,d){b.status>=200&&b.status<300?c(b.responseText,b.getResponseHeader("Last-Modified")):typeof d=="function"&&d(b.status,a)}var f=k(),g=r?!1:o.async;typeof f.overrideMimeType=="function"&&f.overrideMimeType("text/css"),f.open("GET",a,g),f.setRequestHeader("Accept",b||"text/x-less, text/css; q=0.9, */*; q=0.5"),f.send(null),r?f.status===0||f.status>=200&&f.status<300?c(f.responseText):d(f.status,a):g?f.onreadystatechange=function(){f.readyState==4&&e(f,c,d)}:e(f,c,d)}function k(){if(a.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(b){return m("browser doesn't support AJAX."),null}}function l(a){return a&&a.parentNode.removeChild(a)}function m(a){o.env=="development"&&typeof console!="undefined"&&console.log("less: "+a)}function n(a,b){var c="less-error-message:"+h(b),d=["<ul>",'<li><label>[-1]</label><pre class="ctx">{0}</pre></li>',"<li><label>[0]</label><pre>{current}</pre></li>",'<li><label>[1]</label><pre class="ctx">{2}</pre></li>',"</ul>"].join("\n"),e=document.createElement("div"),f,g;e.id=c,e.className="less-error-message",g="<h3>"+(a.message||"There is an error in your .less file")+"</h3>"+'<p><a href="'+b+'">'+b+"</a> ",a.extract&&(g+="on line "+a.line+", column "+(a.column+1)+":</p>"+d.replace(/\[(-?\d)\]/g,function(b,c){return parseInt(a.line)+parseInt(c)||""}).replace(/\{(\d)\}/g,function(b,c){return a.extract[parseInt(c)]||""}).replace(/\{current\}/,a.extract[1].slice(0,a.column)+'<span class="error">'+a.extract[1].slice(a.column)+"</span>")),e.innerHTML=g,i([".less-error-message ul, .less-error-message li {","list-style-type: none;","margin-right: 15px;","padding: 4px 0;","margin: 0;","}",".less-error-message label {","font-size: 12px;","margin-right: 15px;","padding: 4px 0;","color: #cc7777;","}",".less-error-message pre {","color: #ee4444;","padding: 4px 0;","margin: 0;","display: inline-block;","}",".less-error-message pre.ctx {","color: #dd4444;","}",".less-error-message h3 {","font-size: 20px;","font-weight: bold;","padding: 15px 0 5px 0;","margin: 0;","}",".less-error-message a {","color: #10a","}",".less-error-message .error {","color: red;","font-weight: bold;","padding-bottom: 2px;","border-bottom: 1px dashed red;","}"].join("\n"),{title:"error-message"}),e.style.cssText=["font-family: Arial, sans-serif","border: 1px solid #e00","background-color: #eee","border-radius: 5px","-webkit-border-radius: 5px","-moz-border-radius: 5px","color: #e00","padding: 15px","margin-bottom: 15px"].join(";"),o.env=="development"&&(f=setInterval(function(){document.body&&(document.getElementById(c)?document.body.replaceChild(e,document.getElementById(c)):document.body.insertBefore(e,document.body.firstChild),clearInterval(f))},10))}Array.isArray||(Array.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"||a instanceof Array}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){var c=this.length>>>0;for(var d=0;d<c;d++)d in this&&a.call(b,this[d],d,this)}),Array.prototype.map||(Array.prototype.map=function(a){var b=this.length>>>0,c=new Array(b),d=arguments[1];for(var e=0;e<b;e++)e in this&&(c[e]=a.call(d,this[e],e,this));return c}),Array.prototype.filter||(Array.prototype.filter=function(a){var b=[],c=arguments[1];for(var d=0;d<this.length;d++)a.call(c,this[d])&&b.push(this[d]);return b}),Array.prototype.reduce||(Array.prototype.reduce=function(a){var b=this.length>>>0,c=0;if(b===0&&arguments.length===1)throw new TypeError;if(arguments.length>=2)var d=arguments[1];else do{if(c in this){d=this[c++];break}if(++c>=b)throw new TypeError}while(!0);for(;c<b;c++)c in this&&(d=a.call(null,d,this[c],c,this));return d}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length,c=arguments[1]||0;if(!b)return-1;if(c>=b)return-1;c<0&&(c+=b);for(;c<b;c++){if(!Object.prototype.hasOwnProperty.call(this,c))continue;if(a===this[c])return c}return-1}),Object.keys||(Object.keys=function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}),String.prototype.trim||(String.prototype.trim=function(){return String(this).replace(/^\s\s*/,"").replace(/\s\s*$/,"")});var o,q;typeof environment=="object"&&{}.toString.call(environment)==="[object Environment]"?
(typeof a=="undefined"?o={}:o=a.less={},q=o.tree={},o.mode="rhino"):typeof a=="undefined"?(o=exports,q=c("./tree"),o.mode="node"):(typeof a.less=="undefined"&&(a.less={}),o=a.less,q=a.less.tree={},o.mode="browser"),o.Parser=function x(a){function b(){r=u[n],s=m,v=m}function d(){u[n]=r,m=s,v=m}function f(){m>v&&(u[n]=u[n].slice(m-v),v=m)}function g(a){var b,c,d,e,g,h,i,j;if(a instanceof Function)return a.call(w.parsers);if(typeof a=="string")b=l.charAt(m)===a?a:null,d=1,f();else{f();if(!(b=a.exec(u[n])))return null;d=b[0].length}if(b){j=m+=d,h=m+u[n].length-d;while(m<h){e=l.charCodeAt(m);if(e!==32&&e!==10&&e!==9)break;m++}return u[n]=u[n].slice(d+(m-j)),v=m,u[n].length===0&&n<u.length-1&&n++,typeof b=="string"?b:b.length===1?b[0]:b}}function h(a,b){var c=g(a);if(!!c)return c;x(b||(typeof a=="string"?"expected '"+a+"' got '"+l.charAt(m)+"'":"unexpected token"))}function x(a,b){throw{index:m,type:b||"Syntax",message:a}}function i(a){return typeof a=="string"?l.charAt(m)===a:a.test(u[n])?!0:!1}function j(a){for(var b=a,c=-1;b>=0&&l.charAt(b)!=="\n";b--)c++;return{line:a?(l.slice(0,a).match(/\n/g)||"").length:null,column:c}}function k(a,b){var c=l.split("\n"),d=j(a.index),e=d.line,f=d.column;this.type=a.type||"SyntaxError",this.message=a.message,this.filename=a.filename||b.filename,this.index=a.index,this.line=typeof e=="number"?e+1:null,this.callLine=a.call&&j(a.call)+1,this.callExtract=c[j(a.call)],this.stack=a.stack,this.column=f,this.extract=[c[e-1],c[e],c[e+1]]}var l,m,n,r,s,t,u,v,w,y=this,z=function(){},A=this.imports={paths:a&&a.paths||[],queue:[],files:{},mime:a&&a.mime,error:null,push:function(b,c){var d=this;this.queue.push(b),o.Parser.importer(b,this.paths,function(a,f){d.queue.splice(d.queue.indexOf(b),1),d.files[b]=f,a&&!d.error&&(d.error=a),c(a,f),d.queue.length===0&&z()},a)}};return this.env=a=a||{},this.optimization="optimization"in this.env?this.env.optimization:1,this.env.filename=this.env.filename||null,w={imports:A,parse:function(b,d){var e,f,h,i,j,p,r=[],s,x=null;m=n=v=t=0,u=[],l=b.replace(/\r\n/g,"\n"),u=function(b){var c=0,d=/[^"'`\{\}\/\(\)]+/g,e=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,f=0,g,h=b[0],i,j;for(var k=0,m,n;k<l.length;k++){d.lastIndex=k,(g=d.exec(l))&&g.index===k&&(k+=g[0].length,h.push(g[0])),m=l.charAt(k),e.lastIndex=k,!j&&!i&&m==="/"&&(n=l.charAt(k+1),(n==="/"||n==="*")&&(g=e.exec(l))&&g.index===k&&(k+=g[0].length,h.push(g[0]),m=l.charAt(k)));if(m==="{"&&!j&&!i)f++,h.push(m);else if(m==="}"&&!j&&!i)f--,h.push(m),b[++c]=h=[];else if(m==="("&&!j&&!i)h.push(m),i=!0;else if(m===")"&&!j&&i)h.push(m),i=!1;else{if(m==='"'||m==="'"||m==="`")j?j=j===m?!1:j:j=m;h.push(m)}}if(f>0)throw{type:"Syntax",message:"Missing closing `}`",filename:a.filename};return b.map(function(a){return a.join("")})}([[]]);try{e=new q.Ruleset([],g(this.parsers.primary)),e.root=!0}catch(y){return d(new k(y,a))}e.toCSS=function(b){var d,e,f;return function(d,e){var f=[];d=d||{},typeof e=="object"&&!Array.isArray(e)&&(e=Object.keys(e).map(function(a){var b=e[a];return b instanceof q.Value||(b instanceof q.Expression||(b=new q.Expression([b])),b=new q.Value([b])),new q.Rule("@"+a,b,!1,0)}),f=[new q.Ruleset(null,e)]);try{var g=b.call(this,{frames:f}).toCSS([],{compress:d.compress||!1})}catch(h){throw new k(h,a)}if(w.imports.error)throw w.imports.error;return d.yuicompress&&o.mode==="node"?c("./cssmin").compressor.cssmin(g):d.compress?g.replace(/(\s)+/g,"$1"):g}}(e.eval);if(m<l.length-1){m=t,p=l.split("\n"),j=(l.slice(0,m).match(/\n/g)||"").length+1;for(var A=m,B=-1;A>=0&&l.charAt(A)!=="\n";A--)B++;x={type:"Parse",message:"Syntax Error on line "+j,index:m,filename:a.filename,line:j,column:B,extract:[p[j-2],p[j-1],p[j]]}}this.imports.queue.length>0?z=function(){d(x,e)}:d(x,e)},parsers:{primary:function(){var a,b=[];while((a=g(this.mixin.definition)||g(this.rule)||g(this.ruleset)||g(this.mixin.call)||g(this.comment)||g(this.directive))||g(/^[\s\n]+/))a&&b.push(a);return b},comment:function(){var a;if(l.charAt(m)!=="/")return;if(l.charAt(m+1)==="/")return new q.Comment(g(/^\/\/.*/),!0);if(a=g(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))return new q.Comment(a)},entities:{quoted:function(){var a,b=m,c;l.charAt(b)==="~"&&(b++,c=!0);if(l.charAt(b)!=='"'&&l.charAt(b)!=="'")return;c&&g("~");if(a=g(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/))return new q.Quoted(a[0],a[1]||a[2],c)},keyword:function(){var a;if(a=g(/^[_A-Za-z-][_A-Za-z0-9-]*/))return q.colors.hasOwnProperty(a)?new q.Color(q.colors[a].slice(1)):new q.Keyword(a)},call:function(){var a,b,c=m;if(!(a=/^([\w-]+|%|progid:[\w\.]+)\(/.exec(u[n])))return;a=a[1].toLowerCase();if(a==="url")return null;m+=a.length;if(a==="alpha")return g(this.alpha);g("("),b=g(this.entities.arguments);if(!g(")"))return;if(a)return new q.Call(a,b,c)},arguments:function(){var a=[],b;while(b=g(this.entities.assignment)||g(this.expression)){a.push(b);if(!g(","))break}return a},literal:function(){return g(this.entities.dimension)||g(this.entities.color)||g(this.entities.quoted)},assignment:function(){var a,b;if((a=g(/^\w+(?=\s?=)/i))&&g("=")&&(b=g(this.entity)))return new q.Assignment(a,b)},url:function(){var a;if(l.charAt(m)!=="u"||!g(/^url\(/))return;return a=g(this.entities.quoted)||g(this.entities.variable)||g(this.entities.dataURI)||g(/^[-\w%@$\/.&=:;#+?~]+/)||"",h(")"),new q.URL(a.value||a.data||a instanceof q.Variable?a:new q.Anonymous(a),A.paths)},dataURI:function(){var a;if(g(/^data:/)){a={},a.mime=g(/^[^\/]+\/[^,;)]+/)||"",a.charset=g(/^;\s*charset=[^,;)]+/)||"",a.base64=g(/^;\s*base64/)||"",a.data=g(/^,\s*[^)]+/);if(a.data)return a}},variable:function(){var a,b=m;if(l.charAt(m)==="@"&&(a=g(/^@@?[\w-]+/)))return new q.Variable(a,b)},color:function(){var a;if(l.charAt(m)==="#"&&(a=g(/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})/)))return new q.Color(a[1])},dimension:function(){var a,b=l.charCodeAt(m);if(b>57||b<45||b===47)return;if(a=g(/^(-?\d*\.?\d+)(px|%|em|rem|pc|ex|in|deg|s|ms|pt|cm|mm|rad|grad|turn)?/))return new q.Dimension(a[1],a[2])},javascript:function(){var a,b=m,c;l.charAt(b)==="~"&&(b++,c=!0);if(l.charAt(b)!=="`")return;c&&g("~");if(a=g(/^`([^`]*)`/))return new q.JavaScript(a[1],m,c)}},variable:function(){var a;if(l.charAt(m)==="@"&&(a=g(/^(@[\w-]+)\s*:/)))return a[1]},shorthand:function(){var a,b;if(!i(/^[@\w.%-]+\/[@\w.-]+/))return;if((a=g(this.entity))&&g("/")&&(b=g(this.entity)))return new q.Shorthand(a,b)},mixin:{call:function(){var a=[],b,c,d,e=m,f=l.charAt(m),h=!1;if(f!=="."&&f!=="#")return;while(b=g(/^[#.](?:[\w-]|\\(?:[a-fA-F0-9]{1,6} ?|[^a-fA-F0-9]))+/))a.push(new q.Element(c,b,m)),c=g(">");g("(")&&(d=g(this.entities.arguments))&&g(")"),g(this.important)&&(h=!0);if(a.length>0&&(g(";")||i("}")))return new q.mixin.Call(a,d,e,h)},definition:function(){var a,c=[],e,f,j,k,n;if(l.charAt(m)!=="."&&l.charAt(m)!=="#"||i(/^[^{]*(;|})/))return;b();if(e=g(/^([#.](?:[\w-]|\\(?:[a-fA-F0-9]{1,6} ?|[^a-fA-F0-9]))+)\s*\(/)){a=e[1];while(j=g(this.entities.variable)||g(this.entities.literal)||g(this.entities.keyword)){j instanceof q.Variable?g(":")?(k=h(this.expression,"expected expression"),c.push({name:j.name,value:k})):c.push({name:j.name}):c.push({value:j});if(!g(","))break}h(")"),g(/^when/)&&(n=h(this.conditions,"expected condition")),f=g(this.block);if(f)return new q.mixin.Definition(a,c,f,n);d()}}},entity:function(){return g(this.entities.literal)||g(this.entities.variable)||g(this.entities.url)||g(this.entities.call)||g(this.entities.keyword)||g(this.entities.javascript)||g(this.comment)},end:function(){return g(";")||i("}")},alpha:function(){var a;if(!g(/^\(opacity=/i))return;if(a=g(/^\d+/)||g(this.entities.variable))return h(")"),new q.Alpha(a)},element:function(){var a,b,c,d;c=g(this.combinator),a=g(/^(?:\d+\.\d+|\d+)%/)||g(/^(?:[.#]?|:*)(?:[\w-]|\\(?:[a-fA-F0-9]{1,6} ?|[^a-fA-F0-9]))+/)||g("*")||g(this.attribute)||g(/^\([^)@]+\)/),a||g("(")&&(d=g(this.entities.variable))&&g(")")&&(a=new q.Paren(d));if(a)return new q.Element(c,a,m);if(c.value&&c.value.charAt(0)==="&")return new q.Element(c,null,m)},combinator:function(){var a,b=l.charAt(m);if(b===">"||b==="+"||b==="~"){m++;while(l.charAt(m)===" ")m++;return new q.Combinator(b)}if(b==="&"){a="&",m++,l.charAt(m)===" "&&(a="& ");while(l.charAt(m)===" ")m++;return new q.Combinator(a)}if(b===":"&&l.charAt(m+1)===":"){m+=2;while(l.charAt(m)===" ")m++;return new q.Combinator("::")}return l.charAt(m-1)===" "?new q.Combinator(" "):new q.Combinator(null)},selector:function(){var a,b,c=[],d,e;while(b=g(this.element)){d=l.charAt(m),c.push(b);if(d==="{"||d==="}"||d===";"||d===",")break}if(c.length>0)return new q.Selector(c)},tag:function(){return g(/^[a-zA-Z][a-zA-Z-]*[0-9]?/)||g("*")},attribute:function(){var a="",b,c,d;if(!g("["))return;if(b=g(/^[a-zA-Z-]+/)||g(this.entities.quoted))(d=g(/^[|~*$^]?=/))&&(c=g(this.entities.quoted)||g(/^[\w-]+/))?a=[b,d,c.toCSS?c.toCSS():c].join(""):a=b;if(!g("]"))return;if(a)return"["+a+"]"},block:function(){var a;if(g("{")&&(a=g(this.primary))&&g("}"))return a},ruleset:function(){var a=[],c,e,f;b();while(c=g(this.selector)){a.push(c),g(this.comment);if(!g(","))break;g(this.comment)}if(a.length>0&&(e=g(this.block)))return new q.Ruleset(a,e);t=m,d()},rule:function(){var a,c,e=l.charAt(m),f,h;b();if(e==="."||e==="#"||e==="&")return;if(a=g(this.variable)||g(this.property)){a.charAt(0)!="@"&&(h=/^([^@+\/'"*`(;{}-]*);/.exec(u[n]))?(m+=h[0].length-1,c=new q.Anonymous(h[1])):a==="font"?c=g(this.font):c=g(this.value),f=g(this.important);if(c&&g(this.end))return new q.Rule(a,c,f,s);t=m,d()}},"import":function(){var a,b;if(g(/^@import\s+/)&&(a=g(this.entities.quoted)||g(this.entities.url))){b=g(this.mediaFeatures);if(g(";"))return new q.Import(a,A,b)}},mediaFeature:function(){var a=[];do if(e=g(this.entities.keyword))a.push(e);else if(g("(")){p=g(this.property),e=g(this.entity);if(!g(")"))return null;if(p&&e)a.push(new q.Paren(new q.Rule(p,e,null,m,!0)));else{if(!e)return null;a.push(new q.Paren(e))}}while(e);if(a.length>0)return new q.Expression(a)},mediaFeatures:function(){var a,b=[];while(a=g(this.mediaFeature)){b.push(a);if(!g(","))break}return b.length>0?b:null},media:function(){var a;if(g(/^@media/)){a=g(this.mediaFeatures);if(rules=g(this.block))return new q.Directive("@media",rules,a)}},directive:function(){var a,b,c,d,e,f;if(l.charAt(m)!=="@")return;if(b=g(this["import"])||g(this.media))return b;if(a=g(/^@page|@keyframes/)||g(/^@(?:-webkit-|-moz-|-o-|-ms-)[a-z0-9-]+/)){d=(g(/^[^{]+/)||"").trim();if(c=g(this.block))return new q.Directive(a+" "+d,c)}else if(a=g(/^@[-a-z]+/))if(a==="@font-face"){if(c=g(this.block))return new q.Directive(a,c)}else if((b=g(this.entity))&&g(";"))return new q.Directive(a,b)},font:function(){var a=[],b=[],c,d,e,f;while(f=g(this.shorthand)||g(this.entity))b.push(f);a.push(new q.Expression(b));if(g(","))while(f=g(this.expression)){a.push(f);if(!g(","))break}return new q.Value(a)},value:function(){var a,b=[],c;while(a=g(this.expression)){b.push(a);if(!g(","))break}if(b.length>0)return new q.Value(b)},important:function(){if(l.charAt(m)==="!")return g(/^! *important/)},sub:function(){var a;if(g("(")&&(a=g(this.expression))&&g(")"))return a},multiplication:function(){var a,b,c,d;if(a=g(this.operand)){while(!i(/^\/\*/)&&(c=g("/")||g("*"))&&(b=g(this.operand)))d=new q.Operation(c,[d||a,b]);return d||a}},addition:function(){var a,b,c,d;if(a=g(this.multiplication)){while((c=g(/^[-+]\s+/)||l.charAt(m-1)!=" "&&(g("+")||g("-")))&&(b=g(this.multiplication)))d=new q.Operation(c,[d||a,b]);return d||a}},conditions:function(){var a,b,c=m,d;if(a=g(this.condition)){while(g(",")&&(b=g(this.condition)))d=new q.Condition("or",d||a,b,c);return d||a}},condition:function(){var a,b,c,d,e=m,f=!1;g(/^not/)&&(f=!0),h("(");if(a=g(this.addition)||g(this.entities.keyword)||g(this.entities.quoted))return(d=g(/^(?:>=|=<|[<=>])/))?(b=g(this.addition)||g(this.entities.keyword)||g(this.entities.quoted))?c=new q.Condition(d,a,b,e,f):x("expected expression"):c=new q.Condition("=",a,new q.Keyword("true"),e,f),h(")"),g(/^and/)?new q.Condition("and",c,g(this.condition)):c},operand:function(){var a,b=l.charAt(m+1);l.charAt(m)==="-"&&(b==="@"||b==="(")&&(a=g("-"));var c=g(this.sub)||g(this.entities.dimension)||g(this.entities.color)||g(this.entities.variable)||g(this.entities.call);return a?new q.Operation("*",[new q.Dimension(-1),c]):c},expression:function(){var a,b,c=[],d;while(a=g(this.addition)||g(this.entity))c.push(a);if(c.length>0)return new q.Expression(c)},property:function(){var a;if(a=g(/^(\*?-?[-a-z_0-9]+)\s*:/))return a[1]}}}};if(o.mode==="browser"||o.mode==="rhino")o.Parser.importer=function(a,b,c,d){a.charAt(0)!=="/"&&b.length>0&&(a=b[0]+a),g({href:a,title:a,type:d.mime},c,!0)};(function(a){function b(b){return a.functions.hsla(b.h,b.s,b.l,b.a)}function c(b){if(b instanceof a.Dimension)return parseFloat(b.unit=="%"?b.value/100:b.value);if(typeof b=="number")return b;throw{error:"RuntimeError",message:"color functions take numbers as parameters"}}function d(a){return Math.min(1,Math.max(0,a))}a.functions={rgb:function(a,b,c){return this.rgba(a,b,c,1)},rgba:function(b,d,e,f){var g=[b,d,e].map(function(a){return c(a)}),f=c(f);return new a.Color(g,f)},hsl:function(a,b,c){return this.hsla(a,b,c,1)},hsla:function(a,b,d,e){function f(a){return a=a<0?a+1:a>1?a-1:a,a*6<1?h+(g-h)*a*6:a*2<1?g:a*3<2?h+(g-h)*(2/3-a)*6:h}a=c(a)%360/360,b=c(b),d=c(d),e=c(e);var g=d<=.5?d*(b+1):d+b-d*b,h=d*2-g;return this.rgba(f(a+1/3)*255,f(a)*255,f(a-1/3)*255,e)},hue:function(b){return new a.Dimension(Math.round(b.toHSL().h))},saturation:function(b){return new a.Dimension(Math.round(b.toHSL().s*100),"%")},lightness:function(b){return new a.Dimension(Math.round(b.toHSL().l*100),"%")},alpha:function(b){return new a.Dimension(b.toHSL().a)},saturate:function(a,c){var e=a.toHSL();return e.s+=c.value/100,e.s=d(e.s),b(e)},desaturate:function(a,c){var e=a.toHSL();return e.s-=c.value/100,e.s=d(e.s),b(e)},lighten:function(a,c){var e=a.toHSL();return e.l+=c.value/100,e.l=d(e.l),b(e)},darken:function(a,c){var e=a.toHSL();return e.l-=c.value/100,e.l=d(e.l),b(e)},fadein:function(a,c){var e=a.toHSL();return e.a+=c.value/100,e.a=d(e.a),b(e)},fadeout:function(a,c){var e=a.toHSL();return e.a-=c.value/100,e.a=d(e.a),b(e)},fade:function(a,c){var e=a.toHSL();return e.a=c.value/100,e.a=d(e.a),b(e)},spin:function(a,c){var d=a.toHSL(),e=(d.h+c.value)%360;return d.h=e<0?360+e:e,b(d)},mix:function(b,c,d){var e=d.value/100,f=e*2-1,g=b.toHSL().a-c.toHSL().a,h=((f*g==-1?f:(f+g)/(1+f*g))+1)/2,i=1-h,j=[b.rgb[0]*h+c.rgb[0]*i,b.rgb[1]*h+c.rgb[1]*i,b.rgb[2]*h+c.rgb[2]*i],k=b.alpha*e+c.alpha*(1-e);return new a.Color(j,k)},greyscale:function(b){return this.desaturate(b,new a.Dimension(100))},e:function(b){return new a.Anonymous(b instanceof a.JavaScript?b.evaluated:b)},escape:function(b){return new a.Anonymous(encodeURI(b.value).replace(/=/g,"%3D").replace(/:/g,"%3A").replace(/#/g,"%23").replace(/;/g,"%3B").replace(/\(/g,"%28").replace(/\)/g,"%29"))},"%":function(b){var c=Array.prototype.slice.call(arguments,1),d=b.value;for(var e=0;e<c.length;e++)d=d.replace(/%[sda]/i,function(a){var b=a.match(/s/i)?c[e].value:c[e].toCSS();return a.match(/[A-Z]$/)?encodeURIComponent(b):b});return d=d.replace(/%%/g,"%"),new a.Quoted('"'+d+'"',d)},round:function(a){return this._math("round",a)},ceil:function(a){return this._math("ceil",a)},floor:function(a){return this._math("floor",a)},_math:function(b,d){if(d instanceof a.Dimension)return new a.Dimension(Math[b](c(d)),d.unit);if(typeof d=="number")return Math[b](d);throw{type:"Argument",message:"argument must be a number"}},argb:function(b){return new a.Anonymous(b.toARGB())},percentage:function(b){return new a.Dimension(b.value*100,"%")},color:function(b){if(b instanceof a.Quoted)return new a.Color(b.value.slice(1));throw{type:"Argument",message:"argument must be a string"}},iscolor:function(b){return this._isa(b,a.Color)},isnumber:function(b){return this._isa(b,a.Dimension)},isstring:function(b){return this._isa(b,a.Quoted)},iskeyword:function(b){return this._isa(b,a.Keyword)},isurl:function(b){return this._isa(b,a.URL)},ispixel:function(b){return b instanceof a.Dimension&&b.unit==="px"?a.True:a.False},ispercentage:function(b){return b instanceof a.Dimension&&b.unit==="%"?a.True:a.False},isem:function(b){return b instanceof a.Dimension&&b.unit==="em"?a.True:a.False},_isa:function(b,c){return b instanceof c?a.True:a.False}}})(c("./tree")),function(a){a.colors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(c("./tree")),function(a){a.Alpha=function(a){this.value=a},a.Alpha.prototype={toCSS:function(){return"alpha(opacity="+(this.value.toCSS?this.value.toCSS():this.value)+")"},eval:function(a){return this.value.eval&&(this.value=this.value.eval(a)),this}}}(c("../tree")),function(a){a.Anonymous=function(a){this.value=a.value||a},a.Anonymous.prototype={toCSS:function(){return this.value},eval:function(){return this}}}(c("../tree")),function(a){a.Assignment=function(a,b){this.key=a,this.value=b},a.Assignment.prototype={toCSS:function(){return this.key+"="+(this.value.toCSS?this.value.toCSS():this.value)},eval:function(a){return this.value.eval&&(this.value=this.value.eval(a)),this}}}(c("../tree")),function(a){a.Call=function(a,b,c){this.name=a,this.args=b,this.index=c},a.Call.prototype={eval:function(b){var c=this.args.map(function(a){return a.eval(b)});if(!(this.name in a.functions))return new a.Anonymous(this.name+"("+c.map(function(a){return a.toCSS()}).join(", ")+")");try{return a.functions[this.name].apply(a.functions,c)}catch(d){throw{type:d.type||"Runtime",message:"error evaluating function `"+this.name+"`"+(d.message?": "+d.message:""),index:this.index}}},toCSS:function(a){return this.eval(a).toCSS()}}}(c("../tree")),function(a){a.Color=function(a,b){Array.isArray(a)?this.rgb=a:a.length==6?this.rgb=a.match(/.{2}/g).map(function(a){return parseInt(a,16)}):this.rgb=a.split("").map(function(a){return parseInt(a+a,16)}),this.alpha=typeof b=="number"?b:1},a.Color.prototype={eval:function(){return this},toCSS:function(){return this.alpha<1?"rgba("+this.rgb.map(function(a){return Math.round(a)}).concat(this.alpha).join(", ")+")":"#"+this.rgb.map(function(a){return a=Math.round(a),a=(a>255?255:a<0?0:a).toString(16),a.length===1?"0"+a:a}).join("")},operate:function(b,c){var d=[];c instanceof a.Color||(c=c.toColor());for(var e=0;e<3;e++)d[e]=a.operate(b,this.rgb[e],c.rgb[e]);return new a.Color(d,this.alpha+c.alpha)},toHSL:function(){var a=this.rgb[0]/255,b=this.rgb[1]/255,c=this.rgb[2]/255,d=this.alpha,e=Math.max(a,b,c),f=Math.min(a,b,c),g,h,i=(e+f)/2,j=e-f;if(e===f)g=h=0;else{h=i>.5?j/(2-e-f):j/(e+f);switch(e){case a:g=(b-c)/j+(b<c?6:0);break;case b:g=(c-a)/j+2;break;case c:g=(a-b)/j+4}g/=6}return{h:g*360,s:h,l:i,a:d}},toARGB:function(){var a=[Math.round(this.alpha*255)].concat(this.rgb);return"#"+a.map(function(a){return a=Math.round(a),a=(a>255?255:a<0?0:a).toString(16),a.length===1?"0"+a:a}).join("")}}}(c("../tree")),function(a){a.Comment=function(a,b){this.value=a,this.silent=!!b},a.Comment.prototype={toCSS:function(a){return a.compress?"":this.value},eval:function(){return this}}}(c("../tree")),function(a){a.Condition=function(a,b,c,d,e){this.op=a.trim(),this.lvalue=b,this.rvalue=c,this.index=d,this.negate=e},a.Condition.prototype.eval=function(a){var b=this.lvalue.eval(a),c=this.rvalue.eval(a),d=this.index,e,e=function(a){switch(a){case"and":return b&&c;case"or":return b||c;default:if(b.compare)e=b.compare(c);else{if(!c.compare)throw{type:"Type",message:"Unable to perform comparison",index:d};e=c.compare(b)}switch(e){case-1:return a==="<"||a==="=<";case 0:return a==="="||a===">="||a==="=<";case 1:return a===">"||a===">="}}}(this.op);return this.negate?!e:e}}(c("../tree")),function(a){a.Dimension=function(a,b){this.value=parseFloat(a),this.unit=b||null},a.Dimension.prototype={eval:function(){return this},toColor:function(){return new a.Color([this.value,this.value,this.value])},toCSS:function(){var a=this.value+this.unit;return a},operate:function(b,c){return new a.Dimension(a.operate(b,this.value,c.value),this.unit||c.unit)},compare:function(b){return b instanceof a.Dimension?b.value>this.value?-1:b.value<this.value?1:0:-1}}}(c("../tree")),function(a){a.Directive=function(b,c,d){this.name=b,this.features=d&&new a.Value(d),Array.isArray(c)?(this.ruleset=new a.Ruleset([],c),this.ruleset.allowImports=!0):this.value=c},a.Directive.prototype={toCSS:function(a,b){var c=this.features?" "+this.features.toCSS(b):"";return this.ruleset?(this.ruleset.root=!0,this.name+c+(b.compress?"{":" {\n  ")+this.ruleset.toCSS(a,b).trim().replace(/\n/g,"\n  ")+(b.compress?"}":"\n}\n")):this.name+" "+this.value.toCSS()+";\n"},eval:function(a){return this.features=this.features&&this.features.eval(a),a.frames.unshift(this),this.ruleset=this.ruleset&&this.ruleset.eval(a),a.frames.shift(),this},variable:function(b){return a.Ruleset.prototype.variable.call(this.ruleset,b)},find:function(){return a.Ruleset.prototype.find.apply(this.ruleset,arguments)},rulesets:function(){return a.Ruleset.prototype.rulesets.apply(this.ruleset)}}}(c("../tree")),function(a){a.Element=function(b,c,d){this.combinator=b instanceof a.Combinator?b:new a.Combinator(b),typeof c=="string"?this.value=c.trim():c?this.value=c:this.value="",this.index=d},a.Element.prototype.eval=function(b){return new a.Element(this.combinator,this.value.eval?this.value.eval(b):this.value,this.index)},a.Element.prototype.toCSS=function(a){return this.combinator.toCSS(a||{})+(this.value.toCSS?this.value.toCSS(a):this.value)},a.Combinator=function(a){a===" "?this.value=" ":a==="& "?this.value="& ":this.value=a?a.trim():""},a.Combinator.prototype.toCSS=function(a){return{"":""," ":" ","&":"","& ":" ",":":" :","::":"::","+":a.compress?"+":" + ","~":a.compress?"~":" ~ ",">":a.compress?">":" > "}[this.value]}}(c("../tree")),function(a){a.Expression=function(a){this.value=a},a.Expression.prototype={eval:function(b){return this.value.length>1?new a.Expression(this.value.map(function(a){return a.eval(b)})):this.value.length===1?this.value[0].eval(b):this},toCSS:function(a){return this.value.map(function(b){return b.toCSS?b.toCSS(a):""}).join(" ")}}}(c("../tree")),function(a){a.Import=function(b,c,d){var e=this;this._path=b,this.features=d&&new a.Value(d),b instanceof a.Quoted?this.path=/\.(le?|c)ss(\?.*)?$/.test(b.value)?b.value:b.value+".less":this.path=b.value.value||b.value,this.css=/css(\?.*)?$/.test(this.path),this.css||c.push(this.path,function(a,b){e.root=b})},a.Import.prototype={toCSS:function(a){var b=this.features?" "+this.features.toCSS(a):"";return this.css?"@import "+this._path.toCSS()+b+";\n":""},eval:function(b){var c,d=this.features&&this.features.eval(b);if(this.css)return this;c=new a.Ruleset([],this.root.rules.slice(0));for(var e=0;e<c.rules.length;e++)c.rules[e]instanceof a.Import&&Array.prototype.splice.apply(c.rules,[e,1].concat(c.rules[e].eval(b)));return this.features?new a.Directive("@media",c.rules,this.features.value):c.rules}}}(c("../tree")),function(a){a.JavaScript=function(a,b,c){this.escaped=c,this.expression=a,this.index=b},a.JavaScript.prototype={eval:function(b){var c,d=this,e={},f=this.expression.replace(/@\{([\w-]+)\}/g,function(c,e){return a.jsify((new a.Variable("@"+e,d.index)).eval(b))});try{f=new Function("return ("+f+")")}catch(g){throw{message:"JavaScript evaluation error: `"+f+"`",index:this.index}}for(var h in b.frames[0].variables())e[h.slice(1)]={value:b.frames[0].variables()[h].value,toJS:function(){return this.value.eval(b).toCSS()}};try{c=f.call(e)}catch(g){throw{message:"JavaScript evaluation error: '"+g.name+": "+g.message+"'",index:this.index}}return typeof c=="string"?new a.Quoted('"'+c+'"',c,this.escaped,this.index):Array.isArray(c)?new a.Anonymous(c.join(", ")):new a.Anonymous(c)}}}(c("../tree")),function(a){a.Keyword=function(a){this.value=a},a.Keyword.prototype={eval:function(){return this},toCSS:function(){return this.value},compare:function(b){return b instanceof a.Keyword?b.value===this.value?0:1:-1}},a.True=new a.Keyword("true"),a.False=new a.Keyword("false")}(c("../tree")),function(a){a.mixin={},a.mixin.Call=function(b,c,d,e){this.selector=new a.Selector(b),this.arguments=c,this.index=d,this.important=e},a.mixin.Call.prototype={eval:function(a){var b,c,d=[],e=!1;for(var f=0;f<a.frames.length;f++)if((b=a.frames[f].find(this.selector)).length>0){c=this.arguments&&this.arguments.map(function(b){return b.eval(a)});for(var g=0;g<b.length;g++)if(b[g].match(c,a))try{Array.prototype.push.apply(d,b[g].eval(a,this.arguments,this.important).rules),e=!0}catch(h){throw{message:h.message,index:h.index,stack:h.stack,call:this.index}}if(e)return d;throw{type:"Runtime",message:"No matching definition was found for `"+this.selector.toCSS().trim()+"("+this.arguments.map(function(a){return a.toCSS()}).join(", ")+")`",index:this.index}}throw{type:"Name",message:this.selector.toCSS().trim()+" is undefined",index:this.index}}},a.mixin.Definition=function(b,c,d,e){this.name=b,this.selectors=[new a.Selector([new a.Element(null,b)])],this.params=c,this.condition=e,this.arity=c.length,this.rules=d,this._lookups={},this.required=c.reduce(function(a,b){return!b.name||b.name&&!b.value?a+1:a},0),this.parent=a.Ruleset.prototype,this.frames=[]},a.mixin.Definition.prototype={toCSS:function(){return""},variable:function(a){return this.parent.variable.call(this,a)},variables:function(){return this.parent.variables.call(this)},find:function(){return this.parent.find.apply(this,arguments)},rulesets:function(){return this.parent.rulesets.apply(this)},evalParams:function(b,c){var d=new a.Ruleset(null,[]);for(var e=0,f;e<this.params.length;e++)if(this.params[e].name){if(!(f=c&&c[e]||this.params[e].value))throw{type:"Runtime",message:"wrong number of arguments for "+this.name+" ("+c.length+" for "+this.arity+")"};d.rules.unshift(new a.Rule(this.params[e].name,f.eval(b)))}return d},eval:function(b,c,d){var e=this.evalParams(b,c),f,g=[],h;for(var i=0;i<Math.max(this.params.length,c&&c.length);i++)g.push(c[i]||this.params[i].value);return e.rules.unshift(new a.Rule("@arguments",(new a.Expression(g)).eval(b))),h=d?this.rules.map(function(b){return new a.Rule(b.name,b.value,"!important",b.index)}):this.rules.slice(0),(new a.Ruleset(null,h)).eval({frames:[this,e].concat(this.frames,b.frames)})},match:function(a,b){var c=a&&a.length||0,d,e;if(c<this.required)return!1;if(this.required>0&&c>this.params.length)return!1;if(this.condition&&!this.condition.eval({frames:[this.evalParams(b,a)].concat(b.frames)}))return!1;d=Math.min(c,this.arity);for(var f=0;f<d;f++)if(!this.params[f].name&&a[f].eval(b).toCSS()!=this.params[f].value.eval(b).toCSS())return!1;return!0}}}(c("../tree")),function(a){a.Operation=function(a,b){this.op=a.trim(),this.operands=b},a.Operation.prototype.eval=function(b){var c=this.operands[0].eval(b),d=this.operands[1].eval(b),e;if(c instanceof a.Dimension&&d instanceof a.Color){if(this.op!=="*"&&this.op!=="+")throw{name:"OperationError",message:"Can't substract or divide a color from a number"};e=d,d=c,c=e}return c.operate(this.op,d)},a.operate=function(a,b,c){switch(a){case"+":return b+c;case"-":return b-c;case"*":return b*c;case"/":return b/c}}}(c("../tree")),function(a){a.Paren=function(a){this.value=a},a.Paren.prototype={toCSS:function(a){return"("+this.value.toCSS(a)+")"},eval:function(b){return new a.Paren(this.value.eval(b))}}}(c("../tree")),function(a){a.Quoted=function(a,b,c,d){this.escaped=c,this.value=b||"",this.quote=a.charAt(0),this.index=d},a.Quoted.prototype={toCSS:function(){return this.escaped?this.value:this.quote+this.value+this.quote},eval:function(b){var c=this,d=this.value.replace(/`([^`]+)`/g,function(d,e){return(new a.JavaScript(e,c.index,!0)).eval(b).value}).replace(/@\{([\w-]+)\}/g,function(d,e){var f=(new a.Variable("@"+e,c.index)).eval(b);return"value"in f?f.value:f.toCSS()});return new a.Quoted(this.quote+d+this.quote,d,this.escaped,this.index)}}}(c("../tree")),function(a){a.Rule=function(b,c,d,e,f){this.name=b,this.value=c instanceof a.Value?c:new a.Value([c]),this.important=d?" "+d.trim():"",this.index=e,this.inline=f||!1,b.charAt(0)==="@"?this.variable=!0:this.variable=!1},a.Rule.prototype.toCSS=function(a){return this.variable?"":this.name+(a.compress?":":": ")+this.value.toCSS(a)+this.important+(this.inline?"":";")},a.Rule.prototype.eval=function(b){return new a.Rule(this.name,this.value.eval(b),this.important,this.index,this.inline)},a.Shorthand=function(a,b){this.a=a,this.b=b},a.Shorthand.prototype={toCSS:function(a){return this.a.toCSS(a)+"/"+this.b.toCSS(a)},eval:function(){return this}}}(c("../tree")),function(a){a.Ruleset=function(a,b){this.selectors=a,this.rules=b,this._lookups={}},a.Ruleset.prototype={eval:function(b){var c=this.selectors&&this.selectors.map(function(a){return a.eval(b)}),d=new a.Ruleset(c,this.rules.slice(0));d.root=this.root,d.allowImports=this.allowImports,b.frames.unshift(d);if(d.root||d.allowImports)for(var e=0;e<d.rules.length;e++)d.rules[e]instanceof a.Import&&Array.prototype.splice.apply(d.rules,[e,1].concat(d.rules[e].eval(b)));for(var e=0;e<d.rules.length;e++)d.rules[e]instanceof a.mixin.Definition&&(d.rules[e].frames=b.frames.slice(0));for(var e=0;e<d.rules.length;e++)d.rules[e]instanceof a.mixin.Call&&Array.prototype.splice.apply(d.rules,[e,1].concat(d.rules[e].eval(b)));for(var e=0,f;e<d.rules.length;e++)f=d.rules[e],f instanceof a.mixin.Definition||(d.rules[e]=f.eval?f.eval(b):f);return b.frames.shift(),d},match:function(a){return!a||a.length===0},variables:function(){return this._variables?this._variables:this._variables=this.rules.reduce(function(b,c){return c instanceof a.Rule&&c.variable===!0&&(b[c.name]=c),b},{})},variable:function(a){return this.variables()[a]},rulesets:function(){return this._rulesets?this._rulesets:this._rulesets=this.rules.filter(function(b){return b instanceof a.Ruleset||b instanceof a.mixin.Definition})},find:function(b,c){c=c||this;var d=[],e,f,g=b.toCSS();return g in this._lookups?this._lookups[g]:(this.rulesets
().forEach(function(e){if(e!==c)for(var g=0;g<e.selectors.length;g++)if(f=b.match(e.selectors[g])){b.elements.length>e.selectors[g].elements.length?Array.prototype.push.apply(d,e.find(new a.Selector(b.elements.slice(1)),c)):d.push(e);break}}),this._lookups[g]=d)},toCSS:function(b,c){var d=[],e=[],f=[],g=[],h,i;this.root||(b.length===0?g=this.selectors.map(function(a){return[a]}):this.joinSelectors(g,b,this.selectors));for(var j=0;j<this.rules.length;j++)i=this.rules[j],i.rules||i instanceof a.Directive?f.push(i.toCSS(g,c)):i instanceof a.Comment?i.silent||(this.root?f.push(i.toCSS(c)):e.push(i.toCSS(c))):i.toCSS&&!i.variable?e.push(i.toCSS(c)):i.value&&!i.variable&&e.push(i.value.toString());return f=f.join(""),this.root?d.push(e.join(c.compress?"":"\n")):e.length>0&&(h=g.map(function(a){return a.map(function(a){return a.toCSS(c)}).join("").trim()}).join(c.compress?",":g.length>3?",\n":", "),d.push(h,(c.compress?"{":" {\n  ")+e.join(c.compress?"":"\n  ")+(c.compress?"}":"\n}\n"))),d.push(f),d.join("")+(c.compress?"\n":"")},joinSelectors:function(a,b,c){for(var d=0;d<c.length;d++)this.joinSelector(a,b,c[d])},joinSelector:function(b,c,d){var e=[],f=[],g=[],h=[],i=!1,j;for(var k=0;k<d.elements.length;k++)j=d.elements[k],j.combinator.value.charAt(0)==="&"&&(i=!0),i?h.push(j):g.push(j);i||(h=g,g=[]),g.length>0&&e.push(new a.Selector(g)),h.length>0&&f.push(new a.Selector(h));for(var l=0;l<c.length;l++)b.push(e.concat(c[l]).concat(f))}}}(c("../tree")),function(a){a.Selector=function(a){this.elements=a,this.elements[0].combinator.value===""&&(this.elements[0].combinator.value=" ")},a.Selector.prototype.match=function(a){var b=this.elements.length,c=a.elements.length,d=Math.min(b,c);if(b<c)return!1;for(var e=0;e<d;e++)if(this.elements[e].value!==a.elements[e].value)return!1;return!0},a.Selector.prototype.eval=function(b){return new a.Selector(this.elements.map(function(a){return a.eval(b)}))},a.Selector.prototype.toCSS=function(a){return this._css?this._css:this._css=this.elements.map(function(b){return typeof b=="string"?" "+b.trim():b.toCSS(a)}).join("")}}(c("../tree")),function(b){b.URL=function(b,c){b.data?this.attrs=b:(typeof a!="undefined"&&!/^(?:https?:\/\/|file:\/\/|data:|\/)/.test(b.value)&&c.length>0&&(b.value=c[0]+(b.value.charAt(0)==="/"?b.value.slice(1):b.value)),this.value=b,this.paths=c)},b.URL.prototype={toCSS:function(){return"url("+(this.attrs?"data:"+this.attrs.mime+this.attrs.charset+this.attrs.base64+this.attrs.data:this.value.toCSS())+")"},eval:function(a){return this.attrs?this:new b.URL(this.value.eval(a),this.paths)}}}(c("../tree")),function(a){a.Value=function(a){this.value=a,this.is="value"},a.Value.prototype={eval:function(b){return this.value.length===1?this.value[0].eval(b):new a.Value(this.value.map(function(a){return a.eval(b)}))},toCSS:function(a){return this.value.map(function(b){return b.toCSS(a)}).join(a.compress?",":", ")}}}(c("../tree")),function(a){a.Variable=function(a,b){this.name=a,this.index=b},a.Variable.prototype={eval:function(b){var c,d,e=this.name;e.indexOf("@@")==0&&(e="@"+(new a.Variable(e.slice(1))).eval(b).value);if(c=a.find(b.frames,function(a){if(d=a.variable(e))return d.value.eval(b)}))return c;throw{message:"variable "+e+" is undefined",index:this.index}}}}(c("../tree")),function(a){a.find=function(a,b){for(var c=0,d;c<a.length;c++)if(d=b.call(a,a[c]))return d;return null},a.jsify=function(a){return Array.isArray(a.value)&&a.value.length>1?"["+a.value.map(function(a){return a.toCSS(!1)}).join(", ")+"]":a.toCSS(!1)}}(c("./tree"));var r=location.protocol==="file:"||location.protocol==="chrome:"||location.protocol==="chrome-extension:"||location.protocol==="resource:";o.env=o.env||(location.hostname=="127.0.0.1"||location.hostname=="0.0.0.0"||location.hostname=="localhost"||location.port.length>0||r?"development":"production"),o.async=!1,o.poll=o.poll||(r?1e3:1500),o.watch=function(){return this.watchMode=!0},o.unwatch=function(){return this.watchMode=!1},o.env==="development"?(o.optimization=0,/!watch/.test(location.hash)&&o.watch(),o.watchTimer=setInterval(function(){o.watchMode&&f(function(a,b,c){a&&i(a.toCSS(),b,c.lastModified)})},o.poll)):o.optimization=3;var s;try{s=typeof a.localStorage=="undefined"?null:a.localStorage}catch(t){s=null}var u=document.getElementsByTagName("link"),v=/^text\/(x-)?less$/;o.sheets=[];for(var w=0;w<u.length;w++)(u[w].rel==="stylesheet/less"||u[w].rel.match(/stylesheet/)&&u[w].type.match(v))&&o.sheets.push(u[w]);o.refresh=function(a){var b,c;b=c=new Date,f(function(a,d,e){e.local?m("loading "+d.href+" from cache."):(m("parsed "+d.href+" successfully."),i(a.toCSS(),d,e.lastModified)),m("css for "+d.href+" generated in "+(new Date-c)+"ms"),e.remaining===0&&m("css generated in "+(new Date-b)+"ms"),c=new Date},a),d()},o.refreshStyles=d,o.refresh(o.env==="development")}(window);